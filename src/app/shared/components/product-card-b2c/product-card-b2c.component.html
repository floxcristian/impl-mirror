<div
  class="product-card"
  [ngClass]="{
    'product-card--layout--grid product-card--size--sm': layout === 'grid-sm',
    'product-card--layout--grid product-card--size--nl': layout === 'grid-nl',
    'product-card--layout--grid product-card--size--lg': layout === 'grid-lg',
    'product-card--layout--list': layout === 'list',
    'product-card--layout--horizontal': layout === 'horizontal'
  }"
>
  <span class="floating-offers" *ngIf="layout === 'horizontal'"> 50% </span>

  <div class="product-card__badges-list">
    <div *ngIf="productData.precio_escala">
      <picture>
        <source
          srcset="assets/images/llevaMasPagaMenos/50x50_cuadrado.webp"
          type="image/webp"
        />
        <source
          srcset="assets/images/llevaMasPagaMenos/50x50_cuadrado.jpg"
          type="image/jpg"
        />
        <img
          src="assets/images/llevaMasPagaMenos/50x50_cuadrado.jpg"
          class="img_escala"
        />
      </picture>
    </div>
  </div>

  <div
    class="product-card__badges-list-right"
    *ngIf="(productData.cyberMonday || 0) > 0"
  >
    <div
      class="badge_cyber float-end"
      style="position: absolute; top: 5px; right: 1px"
    >
      <picture>
        <!-- <source
          srcset="assets/images/cyberMondaySquare.webp"
          type="image/webp"
        />
        <source srcset="assets/images/cyberMondaySquare.png" type="image/png" />
        <img
          src="assets/images/cyberMondaySquare.png"
          alt=""
          height="60px"
          width="60px"
          class="me-1 mt-sm-1 img"
          style="
            position: absolute;
            width: 60px;
            height: 60px;
            top: 3px;
            right: 1px;
            z-index: 8;
          "
        /> -->
        <img
          src="https://images.implementos.cl/uploads/cyber/cyberMonday.webp"
          alt=""
          height="60px"
          width="60px"
          class="mr-1 mt-sm-1 img"
          style="
            position: absolute;
            width: 60px;
            height: 60px;
            top: 3px;
            right: 1px;
            z-index: 8;
          "
        />
      </picture>
    </div>
  </div>

  <div
    class="product-card__badges-list-right"
    *ngIf="(productData.cyber || 0) > 0 && productData.cyberMonday === 0"
  >
    <div
      class="badge_cyber float-end"
      style="position: absolute; top: 5px; right: 1px"
    >
      <picture>
        <!-- <source srcset="assets/images/cyberCircle.webp" type="image/webp" />
        <source srcset="assets/images/cyberCircle.png" type="image/png" />
        <img
          src="assets/images/cyberCircle.png"
          alt=""
          height="60px"
          width="60px"
          class="me-1 mt-sm-1 img"
          style="
            position: absolute;
            width: 50px;
            height: 50px;
            top: 3px;
            right: 1px;
            z-index: 8;
          "
        /> -->
        <img
          src="https://images.implementos.cl/uploads/cyber/cyber.webp"
          alt=""
          height="60px"
          width="60px"
          class="mr-1 mt-sm-1 img"
          style="
            position: absolute;
            width: 50px;
            height: 50px;
            top: 3px;
            right: 1px;
            z-index: 8;
          "
        />
      </picture>
    </div>
  </div>

  <div class="d-flex justify-content-center align-content-center">
    <div [class.text-center]="home || cartClass" class="alturaimg">
      <a
        style="display: flex; align-content: center; justify-content: center"
        appClick
        (click)="setOrigenBeforeFicha()"
        [routerLink]="
          root.product(productData.sku, productData.nombre, paramsCategory)
        "
      >
        <img
          [src]="root.getUrlImagenMiniatura(productData)"
          class="img-fluid-producto lazyload"
          [class.imgH]="home"
          [class.imgC]="cartClass"
          [alt]="productData.nombre"
        />
      </a>
    </div>
  </div>
  <div class="product-card__info">
    <div class="product-card__name">
      <a
        class="marcaP"
        (click)="setOrigenBeforeFicha()"
        appClick
        [routerLink]="
          root.product(productData.sku, productData.nombre, paramsCategory)
        "
        >{{
          productData.marca
            | replace : '^SIN MARCA$' : 'IMPLEMENTOS'
            | replace : '^0$' : 'IMPLEMENTOS'
        }}</a
      >

      <br />
      <a
        appClick
        (click)="setOrigenBeforeFicha()"
        [routerLink]="
          root.product(productData.sku, productData.nombre, paramsCategory)
        "
      >
        <span class="nombreP">
          {{ productData.nombre | capitalizeFirst }}
        </span>
      </a>
      <br />
      <a
        appClick
        class="skuP"
        (click)="setOrigenBeforeFicha()"
        [routerLink]="
          root.product(productData.sku, productData.nombre, paramsCategory)
        "
        >SKU: {{ productData.sku }}</a
      >
    </div>
    <div
      *ngIf="porcentaje != 0"
      class="d-flex justify-content-start"
      [ngClass]="home ? 'porcentaje-home' : 'porcentaje-category'"
    >
      <div class="alert alert-primary" role="alert">
        <i class="fa-solid fa-tag" style="margin-right: 2px; color: white"></i>
        {{ porcentaje + '%' }}
      </div>
    </div>
    <div
      class="product-card__prices text-end ps-0"
      style="padding-top: 8px !important"
    >
      <ng-container *ngIf="!productData.compareAtPrice">
        <div
          *ngIf="productData?.precioComun == productData?.precio?.precio"
          class="product-card__new-price col-12"
          style="padding-left: 0 !important; padding-right: 5px !important"
        >
          {{ productData.precio.precio | currencyFormat }} <em> c/iva </em>
        </div>

        <div
          *ngIf="productData?.precioComun != productData?.precio?.precio"
          class="product-card__new-price text-danger col-12"
          style="
            padding-left: 0 !important;
            padding-right: 5px !important;
            margin-left: 5px;
          "
        >
          {{ productData.precio.precio | currencyFormat }} <em> c/iva </em>
        </div>

        <div
          *ngIf="productData?.precioComun != productData?.precio?.precio"
          tooltip="Precio normal"
          class="product-card__old-price col-12"
          style="
            text-align: right;
            padding-left: 0 !important;
            padding-right: 5px !important;
          "
        >
          {{ productData.precioComun | currencyFormat }} <em> c/iva </em>
          <br />
        </div>
      </ng-container>
    </div>

    <ul
      *ngIf="productData.atributos?.length"
      class="product-card__features-list"
    >
      <li *ngFor="let feature of productData.atributos | slice : 0 : 5">
        <span class="producto-atributo-listado">{{
          feature.nombre | titlecase
        }}</span
        >:
        {{ feature.valor | titlecase }}
      </li>

      <li>
        <a
          (click)="setOrigenBeforeFicha()"
          [routerLink]="
            root.product(productData.sku, productData.nombre, paramsCategory)
          "
        >
          Ver m√°s...</a
        >
      </li>
    </ul>
  </div>

  <div class="product-card__actions">
    <div class="product-card__buttons">
      <button
        name="addToCart"
        [disabled]="!productData.precio"
        class="btn btn-secondary product-card__addtocart w-100"
        type="button"
        appClick
        (click)="addToCart()"
        [ngClass]="{ 'btn-loading': addingToCart }"
      >
        <div class="text-center" style="font-size: 14px">AGREGAR</div>
      </button>

      <button
        name="add"
        [disabled]="!productData.precio"
        class="btn btn-secondary product-card__addtocart product-card__addtocart--list"
        type="button"
        appClick
        (click)="addToCart()"
        [ngClass]="{ 'btn-loading': addingToCart }"
      >
        <div class="text-center" style="font-size: 14px">AGREGAR</div>
      </button>

      <button
        name="addingToWishlist"
        *ngIf="grid == 'list'"
        ngbTooltip="Tooltip on top"
        class="btn btn-light btn-svg-icon btn-svg-icon--fake-svg product-card__wishlist"
        type="button"
        appClick
        (click)="addToWishlist()"
        [ngClass]="{ 'btn-loading': addingToWishlist }"
      >
        <i class="far fa-heart"></i>
      </button>
    </div>
  </div>
</div>
